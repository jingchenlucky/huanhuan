<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
    // 遇到异步的情况，ES6中使用promise处理较为麻烦，ES7中使用async和await较为方便，在es7出现之前，大部分使用生成器处理异步问题。
      function asyncGetData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve('缓缓');
          }, 2000);
        });
      }
      function* task() {
        console.log('开始获取数据');
        const data = yield asyncGetData();
        // yield asyncGetData();这里拿到的迭代数据为{value: Promise, done: false}
        //value是一个promise对象，当执行resolve拿到数据的时候，触发promise.then。将data传入，并通过generator.next(data)将数据赋值给data,然后打印数据
        console.log(`获取到到数据为${data}`);
      }
      const generator = task();
      const result = generator.next();//{value: Promise, done: false}
      result.value.then(data => generator.next(data));
    </script>
  </body>
</html>
